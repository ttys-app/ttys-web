(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[959],{4167:(e,a,r)=>{"use strict";r.d(a,{default:()=>m});var t=r(5155),l=r(2115),s=r(2515),n=r(5695),c=r(6766),i=r(40),o=r(5113);let d=(e,a)=>(0,o.A)({url:"".concat(i.VT,"/video/action/search?fontType=").concat(e.fontType||"","&name=").concat(e.name||"","&nameEn=").concat(e.nameEn||"","&type=").concat(e.type||"0","&pageIndex=").concat(e.pageIndex||0,"&pageSize=").concat(e.pageSize||10)},a);var u=r(190);let x=(e,a)=>{if(!e)return"";let r=e.split(",").map(e=>{let r=e.trim();return r&&a[r]||""}).filter(Boolean);return r.length>0?r.join(","):""};function m(e){let{translations:a}=e,r=(0,n.useRouter)(),{settings:o}=(0,u.A)(),[m,g]=(0,l.useState)(""),[f,h]=(0,l.useState)([]),[p,v]=(0,l.useState)(!1),[j,N]=(0,l.useState)(!1),y=(0,l.useRef)(null),b=(0,i.zj)(o.language);(0,l.useEffect)(()=>{N(!0),setTimeout(()=>{var e;null==(e=y.current)||e.focus()},300)},[]);let k=(0,l.useCallback)(async()=>{if(!m.trim())return void h([]);v(!0);try{let e=await d("cn"===o.language||"tw"===o.language?{fontType:o.language||"cn",name:m,pageIndex:0,pageSize:10}:{fontType:o.language||"en",nameEn:m,pageIndex:0,pageSize:10});e&&e.list?h(e.list):h([])}catch(e){console.error("搜索出错：",e),h([])}finally{v(!1)}},[m,o.language]);(0,l.useEffect)(()=>{let e=setTimeout(()=>{m.trim()&&k()},500);return()=>clearTimeout(e)},[m,k]);let w=e=>{r.push("/detail/".concat(e))};return(0,t.jsx)("div",{className:"h-full w-full bg-white dark:bg-neutral-900 overflow-hidden",children:(0,t.jsxs)("div",{className:"absolute top-0 left-0 h-full w-full bg-white dark:bg-neutral-900 z-20 transform transition-transform duration-300 flex flex-col ".concat(j?"translate-x-0":"translate-x-full"),children:[(0,t.jsxs)("div",{className:"flex items-center p-2 border-b border-gray-200 dark:border-gray-800 shrink-0",children:[(0,t.jsx)("button",{className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-neutral-800",onClick:()=>{r.back()},children:(0,t.jsx)(s.MGo,{size:20})}),(0,t.jsxs)("div",{className:"flex-1 mx-2 relative",children:[(0,t.jsx)("input",{type:"text",value:m,onChange:e=>{g(e.target.value)},placeholder:a.searchPlaceholder,className:"w-full p-2 pl-3 pr-8 rounded-full bg-gray-100 dark:bg-neutral-800 focus:outline-none",ref:y}),m&&(0,t.jsx)("button",{className:"absolute right-2 top-1/2 transform -translate-y-1/2",onClick:()=>{var e;g(""),h([]),null==(e=y.current)||e.focus()},children:(0,t.jsx)(s.Tfw,{size:18})})]})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,t.jsx)("div",{className:"px-6 pb-20",children:p?(0,t.jsx)("div",{className:"flex justify-center items-center h-24",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-gray-500"})}):f.length>0?(0,t.jsx)("div",{className:"space-y-3",children:f.map(e=>{var r;return(0,t.jsxs)("div",{className:"flex items-start p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-neutral-800 cursor-pointer",onClick:()=>w(e.ID),children:[(0,t.jsx)("div",{className:"relative w-20 h-28 flex-shrink-0 overflow-hidden rounded-md",children:(0,t.jsx)(c.default,{src:e.coverSrc||"/placeholder.jpg",alt:e.name,fill:!0,sizes:"80px",className:"object-cover",onError:e=>{e.target.src="/placeholder.jpg"}})}),(0,t.jsxs)("div",{className:"ml-3 flex-1",children:[(0,t.jsx)("h3",{className:"font-medium text-sm",children:"cn"===o.language||"tw"===o.language?e.name:null!=(r=e.nameEn)?r:e.name}),(0,t.jsxs)("div",{className:"flex items-center mt-1",children:[e.score&&(0,t.jsx)("span",{className:"text-yellow-500 text-xs mr-2",children:e.score}),e.releaseYear&&(0,t.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-400 mr-2",children:["• ",e.releaseYear]}),e.area&&(0,t.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["• ",x(null==e?void 0:e.area,b.AREA)]})]}),(0,t.jsx)("div",{className:"flex flex-wrap items-center mt-1",children:e.director&&(0,t.jsx)("span",{className:" text-[10px]",children:e.director})}),(0,t.jsx)("div",{className:"flex flex-wrap items-center",children:e.starring&&(0,t.jsx)("span",{className:"text-[10px] text-gray-500 dark:text-gray-400",children:e.starring})})]}),(0,t.jsx)("div",{className:"flex items-center self-center ml-2",children:(0,t.jsx)("button",{className:"px-3 py-1 text-xs text-white bg-orange rounded-full cursor-pointer",onClick:a=>{a.stopPropagation(),w(e.ID)},children:a.playNow})})]},e.ID)})}):m?(0,t.jsx)("div",{className:"text-center p-6 text-gray-500 dark:text-gray-400",children:a.noResults}):null})})]})})}},4276:(e,a,r)=>{Promise.resolve().then(r.bind(r,4167))}},e=>{var a=a=>e(e.s=a);e.O(0,[479,33,733,798,875,810,262,441,684,358],()=>a(4276)),_N_E=e.O()}]);