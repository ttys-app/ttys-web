{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/michael/projects/ttys/src/app/detail/%5Bid%5D/components/RecommendVideos.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport Image from 'next/image';\nimport Link from 'next/link';\nimport { useRouter } from 'next/navigation';\n\ninterface VideoItem {\n  id: string;\n  title: string;\n  cover: string;\n  description?: string;\n  score?: number;\n  year?: string;\n  category?: string;\n  region?: string;\n}\n\ninterface RecommendVideosProps {\n  videos: VideoItem[];\n  translations: any;\n}\n\nexport default function RecommendVideos({ videos, translations }: RecommendVideosProps) {\n  const router = useRouter();\n  \n  // 处理点击事件\n  const handleVideoClick = (id: string) => {\n    router.push(`/detail/${id}`);\n  };\n  \n  // 如果没有推荐视频\n  if (!videos || videos.length === 0) {\n    return <div className=\"text-gray-500 text-center py-4\">{translations.noData}</div>;\n  }\n  \n  return (\n    <div className=\"grid grid-cols-3 gap-3\">\n      {videos.map((video) => (\n        <div \n          key={video.id} \n          className=\"video-card cursor-pointer\"\n          onClick={() => handleVideoClick(video.id)}\n        >\n          <div className=\"relative aspect-[2/3] overflow-hidden rounded-lg mb-2 bg-gray-200 dark:bg-neutral-800\">\n            <Image\n              src={video.cover}\n              alt={video.title}\n              fill\n              sizes=\"(max-width: 768px) 33vw, 20vw\"\n              className=\"object-cover\"\n              onError={(e) => {\n                // 处理图片加载错误\n                (e.target as HTMLImageElement).style.display = 'none';\n              }}\n            />\n          </div>\n          <h4 className=\"text-sm truncate\">{video.title}</h4>\n          {video.score ? (\n            <div className=\"text-xs text-yellow-600 dark:text-yellow-400\">\n              ⭐ {video.score}\n            </div>\n          ) : null}\n        </div>\n      ))}\n    </div>\n  );\n} "],"names":[],"mappings":";;;;AAGA;AAEA;;;AALA;;;AAuBe,SAAS,gBAAgB,EAAE,MAAM,EAAE,YAAY,EAAwB;;IACpF,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IAEvB,SAAS;IACT,MAAM,mBAAmB,CAAC;QACxB,OAAO,IAAI,CAAC,CAAC,QAAQ,EAAE,IAAI;IAC7B;IAEA,WAAW;IACX,IAAI,CAAC,UAAU,OAAO,MAAM,KAAK,GAAG;QAClC,qBAAO,6LAAC;YAAI,WAAU;sBAAkC,aAAa,MAAM;;;;;;IAC7E;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACZ,OAAO,GAAG,CAAC,CAAC,sBACX,6LAAC;gBAEC,WAAU;gBACV,SAAS,IAAM,iBAAiB,MAAM,EAAE;;kCAExC,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC,gIAAA,CAAA,UAAK;4BACJ,KAAK,MAAM,KAAK;4BAChB,KAAK,MAAM,KAAK;4BAChB,IAAI;4BACJ,OAAM;4BACN,WAAU;4BACV,SAAS,CAAC;gCACR,WAAW;gCACV,EAAE,MAAM,CAAsB,KAAK,CAAC,OAAO,GAAG;4BACjD;;;;;;;;;;;kCAGJ,6LAAC;wBAAG,WAAU;kCAAoB,MAAM,KAAK;;;;;;oBAC5C,MAAM,KAAK,iBACV,6LAAC;wBAAI,WAAU;;4BAA+C;4BACzD,MAAM,KAAK;;;;;;+BAEd;;eAtBC,MAAM,EAAE;;;;;;;;;;AA2BvB;GA5CwB;;QACP,qIAAA,CAAA,YAAS;;;KADF","debugId":null}},
    {"offset": {"line": 112, "column": 0}, "map": {"version":3,"sources":["file:///Users/michael/projects/ttys/src/appConfig.js"],"sourcesContent":["import { getTranslationClient } from './app/i18n/client';\n\nexport const DEV = process.env.NODE_ENV === 'development'\n\n// 基本配置，不依赖国际化\nexport const appSecret = 'A1CfWF1tN7SCgOZa'\nexport const contactEmail = 'support@ttys.app'\nexport const cryptMode = 'g' // rc4 || g\n\n// 样式配置\nexport const THEME_COLOR = 'rgb(9,161,228)'\nexport const ACTION_BTN_COLOR = 'rgb(9,161,228)'\nexport const CENTER_BTN_COLOR = 'rgb(9,161,228)'\n\n// seo\nexport const OG_LOCALE = {\n  cn: 'zh_CN',\n  tw: 'zh_TW',\n  en: 'en_US',\n  ja: 'ja_JP',\n  ko: 'ko_KR',\n}\n\n// 网络配置\nexport const ENCRYPT = DEV ? 0 : 1\nexport const FETCH_TIME_OUT = 10000\nexport const WEB_LINK = 'https://ttys.app'\nexport const SHARE_LINK = 'https://ttys.app'\n// 平台下载链接\nexport const IOS_APP_STORE_ID = ''\nexport const IOS_DOWNLOAD_LINK = 'https://apps.apple.com/app/com.ttys' \n\nexport const ANDROID_PACKAGE = 'com.ttys'\n// export const ANDROID_DOWNLOAD_LINK = 'https://play.google.com/store/apps/details?id=com.ttys'\nexport const ANDROID_DOWNLOAD_LINK = 'https://assets.ttys.app/app.apk'\n\nexport const DOWNLOAD_LINK = 'https://assets.ttys.app/app.apk' // 通用下载页面，作为默认备选\n\nexport const LOCAL_PORT = 10000\nexport const ORIGIN = typeof DEV !== 'undefined' && DEV ? 'http://192.168.1.101:6061/v1' : 'https://api.ttys.app/v1'\nexport const FILE_ORIGIN = typeof DEV !== 'undefined' && DEV ? 'http://192.168.1.101:6062/v1' : 'https://api2.ttys.app/v1'\nexport const MINIO_ORIGIN = typeof DEV !== 'undefined' && DEV ? 'http://192.168.1.101:9000/v1' : 'https://api.ttys.app/v1'\n\n// 获取多语言配置 - 客户端版本\nexport function getConfig(locale) {\n  // 获取翻译函数\n  const { t } = getTranslationClient(locale);\n  \n  return {\n    appName: t('config_app_name'),\n\n    YEAR: t('general_years'),\n    \n    CATEGORY_TYPE: {\n      '0': t('category_type'),\n      '1': t('category_region'),\n      '2': t('category_year'),\n      '3': t('category_all'),\n    },\n    \n    ART_TYPE: {\n      '0': t('artTypeFilm'),\n      '1': t('artTypeTeleplay'),\n      '2': t('artTypeEntertainment'),\n      '3': t('artTypeVariety'),\n      '4': t('artTypeNews'),\n    },\n    \n    CONTENT_TYPE: {\n      '0': t('contentTypePlot'),\n      '1': t('contentTypeComedy'),\n      '2': t('contentTypeAction'),\n      '3': t('contentTypeRomance'),\n      '4': t('contentTypeScienceFiction'),\n      '5': t('contentTypeCartoon'),\n      '6': t('contentTypeSuspense'),\n      '7': t('contentTypeThriller'),\n      '8': t('contentTypeHorror'),\n      '9': t('contentTypeCrime'),\n      '10': t('contentTypeHomosexual'),\n      '11': t('contentTypeMusic'),\n      '12': t('contentTypeDance'),\n      '13': t('contentTypeBiopic'),\n      '14': t('contentTypeHistorical'),\n      '15': t('contentTypeWar'),\n      '16': t('contentTypeWestward'),\n      '17': t('contentTypeMagical'),\n      '18': t('contentTypeAdventure'),\n      '19': t('contentTypeDisaster'),\n      '20': t('contentTypeMartialArts'),\n      '21': t('contentTypeOthers'),\n    },\n    \n    REELS_CONTENT_TYPE: {\n      '0': t('reelsContentTypeUrban'),\n      '1': t('reelsContentTypeTraverse'),\n      '2': t('reelsContentTypeRebirth'),\n      '3': t('reelsContentTypeWarGod'),\n      '4': t('reelsContentTypeFantasy'),\n      '5': t('reelsContentTypeOverlord'),\n      '6': t('reelsContentTypeTorturedLove'),\n      '7': t('reelsContentTypeBaby'),\n      '8': t('reelsContentTypeCostume'),\n      '9': t('reelsContentTypeDivineHealer'),\n      '10': t('reelsContentTypeFemale'),\n      '11': t('reelsContentTypeMale'),\n      '12': t('reelsContentTypeHeir'),\n      '13': t('reelsContentTypeRepublic'),\n      '14': t('reelsContentTypeRise'),\n      '15': t('reelsContentTypeRomance'),\n      '16': t('reelsContentTypeHistory'),\n      '17': t('reelsContentTypeSweet'),\n      '18': t('reelsContentTypeRevenge'),\n      '19': t('reelsContentTypeFamily'),\n      '20': t('reelsContentTypeReality'),\n      '21': t('reelsContentTypeKinship'),\n      '22': t('reelsContentTypeFeeling'),\n      '23': t('reelsContentTypeFlashMarriage'),\n      '24': t('reelsContentTypeOthers'),\n    },\n    \n    AREA: {\n      '0': t('areaTypeChinaMainland'),\n      '1': t('areaTypeUnitedStates'),\n      '2': t('areaTypeHongKong'),\n      '3': t('areaTypeTaiwan'),\n      '4': t('areaTypeJapan'),\n      '5': t('areaTypeKorea'),\n      '6': t('areaTypeUnitedKingdom'),\n      '7': t('areaTypeFrance'),\n      '8': t('areaTypeGermany'),\n      '9': t('areaTypeItaly'),\n      '10': t('areaTypeSpain'),\n      '11': t('areaTypeIndia'),\n      '12': t('areaTypeThailand'),\n      '13': t('areaTypeRussia'),\n      '14': t('areaTypeIran'),\n      '15': t('areaTypeCanada'),\n      '16': t('areaTypeAustralia'),\n      '17': t('areaTypeIreland'),\n      '18': t('areaTypeSweden'),\n      '19': t('areaTypeBrazil'),\n      '20': t('areaTypeDenmark'),\n      '21': t('areaTypeOthers'),\n    },\n  };\n}\n\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAEmB;AAFnB;;AAEO,MAAM,MAAM,oDAAyB;AAGrC,MAAM,YAAY;AAClB,MAAM,eAAe;AACrB,MAAM,YAAY,IAAI,WAAW;;AAGjC,MAAM,cAAc;AACpB,MAAM,mBAAmB;AACzB,MAAM,mBAAmB;AAGzB,MAAM,YAAY;IACvB,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;AACN;AAGO,MAAM,UAAU,uCAAM;AACtB,MAAM,iBAAiB;AACvB,MAAM,WAAW;AACjB,MAAM,aAAa;AAEnB,MAAM,mBAAmB;AACzB,MAAM,oBAAoB;AAE1B,MAAM,kBAAkB;AAExB,MAAM,wBAAwB;AAE9B,MAAM,gBAAgB,kCAAkC,gBAAgB;;AAExE,MAAM,aAAa;AACnB,MAAM,SAAS,OAAO,QAAQ,eAAe,MAAM,iCAAiC;AACpF,MAAM,cAAc,OAAO,QAAQ,eAAe,MAAM,iCAAiC;AACzF,MAAM,eAAe,OAAO,QAAQ,eAAe,MAAM,iCAAiC;AAG1F,SAAS,UAAU,MAAM;IAC9B,SAAS;IACT,MAAM,EAAE,CAAC,EAAE,GAAG,CAAA,GAAA,+HAAA,CAAA,uBAAoB,AAAD,EAAE;IAEnC,OAAO;QACL,SAAS,EAAE;QAEX,MAAM,EAAE;QAER,eAAe;YACb,KAAK,EAAE;YACP,KAAK,EAAE;YACP,KAAK,EAAE;YACP,KAAK,EAAE;QACT;QAEA,UAAU;YACR,KAAK,EAAE;YACP,KAAK,EAAE;YACP,KAAK,EAAE;YACP,KAAK,EAAE;YACP,KAAK,EAAE;QACT;QAEA,cAAc;YACZ,KAAK,EAAE;YACP,KAAK,EAAE;YACP,KAAK,EAAE;YACP,KAAK,EAAE;YACP,KAAK,EAAE;YACP,KAAK,EAAE;YACP,KAAK,EAAE;YACP,KAAK,EAAE;YACP,KAAK,EAAE;YACP,KAAK,EAAE;YACP,MAAM,EAAE;YACR,MAAM,EAAE;YACR,MAAM,EAAE;YACR,MAAM,EAAE;YACR,MAAM,EAAE;YACR,MAAM,EAAE;YACR,MAAM,EAAE;YACR,MAAM,EAAE;YACR,MAAM,EAAE;YACR,MAAM,EAAE;YACR,MAAM,EAAE;YACR,MAAM,EAAE;QACV;QAEA,oBAAoB;YAClB,KAAK,EAAE;YACP,KAAK,EAAE;YACP,KAAK,EAAE;YACP,KAAK,EAAE;YACP,KAAK,EAAE;YACP,KAAK,EAAE;YACP,KAAK,EAAE;YACP,KAAK,EAAE;YACP,KAAK,EAAE;YACP,KAAK,EAAE;YACP,MAAM,EAAE;YACR,MAAM,EAAE;YACR,MAAM,EAAE;YACR,MAAM,EAAE;YACR,MAAM,EAAE;YACR,MAAM,EAAE;YACR,MAAM,EAAE;YACR,MAAM,EAAE;YACR,MAAM,EAAE;YACR,MAAM,EAAE;YACR,MAAM,EAAE;YACR,MAAM,EAAE;YACR,MAAM,EAAE;YACR,MAAM,EAAE;YACR,MAAM,EAAE;QACV;QAEA,MAAM;YACJ,KAAK,EAAE;YACP,KAAK,EAAE;YACP,KAAK,EAAE;YACP,KAAK,EAAE;YACP,KAAK,EAAE;YACP,KAAK,EAAE;YACP,KAAK,EAAE;YACP,KAAK,EAAE;YACP,KAAK,EAAE;YACP,KAAK,EAAE;YACP,MAAM,EAAE;YACR,MAAM,EAAE;YACR,MAAM,EAAE;YACR,MAAM,EAAE;YACR,MAAM,EAAE;YACR,MAAM,EAAE;YACR,MAAM,EAAE;YACR,MAAM,EAAE;YACR,MAAM,EAAE;YACR,MAAM,EAAE;YACR,MAAM,EAAE;YACR,MAAM,EAAE;QACV;IACF;AACF","debugId":null}},
    {"offset": {"line": 273, "column": 0}, "map": {"version":3,"sources":["file:///Users/michael/projects/ttys/src/app/components/common/DownloadAppModal.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { IoCloseCircleOutline } from 'react-icons/io5';\nimport { FaDownload, FaApple, FaAndroid } from 'react-icons/fa';\n\nimport { DOWNLOAD_LINK, ANDROID_DOWNLOAD_LINK, IOS_DOWNLOAD_LINK } from '@/appConfig';\n\ninterface DownloadAppModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  translations: {\n    downloadTitle?: string;\n    downloadDesc?: string;\n    downloadBtn?: string;\n    cancelBtn?: string;\n    download_app_title?: string;\n    download_app_desc?: string;\n    download_app_btn?: string;\n    download_app_cancel?: string;\n    download_app_short_title?: string;\n    download_app_short_desc?: string;\n    download_app_detail_title?: string;\n    download_app_detail_desc?: string;\n    general_watch_now?: string;\n    general_hold?: string;\n    [key: string]: string | undefined;\n  };\n  appLink?: string;\n  videoTitle?: string;\n  modalType?: 'default' | 'short' | 'detail';\n}\n\n// 平台类型\ntype Platform = 'ios' | 'android' | 'unknown';\n\nexport default function DownloadAppModal({\n  isOpen,\n  onClose,\n  translations,\n  appLink,\n  videoTitle = '',\n  modalType = 'default'\n}: DownloadAppModalProps) {\n  // 平台状态\n  const [platform, setPlatform] = useState<Platform>('unknown');\n  const [downloadUrl, setDownloadUrl] = useState(DOWNLOAD_LINK);\n\n  // 检测用户平台\n  useEffect(() => {\n    const detectPlatform = (): Platform => {\n      const userAgent = navigator.userAgent || navigator.vendor || (window as any).opera || '';\n      \n      // iOS设备检测\n      if (/iPad|iPhone|iPod/.test(userAgent) && !(window as any).MSStream) {\n        return 'ios';\n      }\n      \n      // Android设备检测\n      if (/android/i.test(userAgent)) {\n        return 'android';\n      }\n      \n      return 'unknown';\n    };\n    \n    const detectedPlatform = detectPlatform();\n    setPlatform(detectedPlatform);\n    \n    // 根据平台设置下载链接\n    if (detectedPlatform === 'ios') {\n      setDownloadUrl(appLink || IOS_DOWNLOAD_LINK);\n    } else if (detectedPlatform === 'android') {\n      setDownloadUrl(appLink || ANDROID_DOWNLOAD_LINK);\n    } else {\n      setDownloadUrl(appLink || DOWNLOAD_LINK);\n    }\n  }, [appLink]);\n\n  if (!isOpen) return null;\n\n  // 根据modalType选择翻译键\n  let titleKey = 'download_app_title';\n  let descKey = 'download_app_desc';\n  \n  if (modalType === 'short') {\n    titleKey = 'download_app_short_title';\n    descKey = 'download_app_short_desc';\n  } else if (modalType === 'detail') {\n    titleKey = 'download_app_detail_title';\n    descKey = 'download_app_detail_desc';\n  }\n\n  // 从i18n获取文本，如果没有则使用自定义文本\n  const title = translations[titleKey] || translations.downloadTitle || '下载APP观看完整内容';\n  let desc = translations[descKey] || translations.downloadDesc || '安装APP即可观看全部高清视频，无广告，支持离线缓存';\n  \n  // 如果有视频标题，添加到描述中\n  if (videoTitle && modalType === 'detail') {\n    desc = desc.replace('{title}', videoTitle);\n  }\n  \n  const downloadBtn = translations.download_app_btn || translations.downloadBtn || '立即下载';\n  const cancelBtn = translations.download_app_cancel || translations.cancelBtn || '取消';\n\n  const handleDownload = () => {\n    window.open(downloadUrl, '_blank');\n  };\n\n  // 获取平台图标\n  const getPlatformIcon = () => {\n    if (platform === 'ios') {\n      return <FaApple className=\"text-lg mr-2\" />;\n    } else if (platform === 'android') {\n      return <FaAndroid className=\"text-lg mr-2\" />;\n    } else {\n      return <FaDownload className=\"text-lg mr-2\" />;\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center\">\n      {/* 背景遮罩 */}\n      <div \n        className=\"absolute inset-0 bg-black bg-opacity-70\"\n        onClick={onClose}\n      ></div>\n      \n      {/* 弹框内容 - 修改宽度设置，确保不超过移动容器 */}\n      <div className=\"relative w-[90%] max-w-[300px] bg-white dark:bg-gray-800 rounded-lg shadow-xl overflow-hidden z-10\">\n        {/* 关闭按钮 */}\n        <button \n          onClick={onClose}\n          className=\"absolute top-3 right-3 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200\"\n        >\n          <IoCloseCircleOutline className=\"text-2xl\" />\n        </button>\n        \n        {/* 内容区域 */}\n        <div className=\"p-6\">\n          <h3 className=\"text-lg font-bold text-center mb-4\">{title}</h3>\n          \n          <div className=\"flex justify-center mb-4\">\n            <div className=\"w-16 h-16 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center\">\n              {platform === 'ios' ? (\n                <FaApple className=\"text-3xl text-blue-500\" />\n              ) : platform === 'android' ? (\n                <FaAndroid className=\"text-3xl text-blue-500\" />\n              ) : (\n                <FaDownload className=\"text-2xl text-blue-500\" />\n              )}\n            </div>\n          </div>\n          \n          <p className=\"text-sm text-gray-600 dark:text-gray-300 text-center mb-6\">\n            {desc}\n          </p>\n          \n          <div className=\"flex flex-col gap-3\">\n            <button\n              onClick={handleDownload}\n              className=\"w-full py-2.5 bg-[rgb(9,161,228)] text-white rounded-full font-medium flex items-center justify-center\"\n            >\n              {getPlatformIcon()}\n              {downloadBtn}\n            </button>\n            \n            <button\n              onClick={onClose}\n              className=\"w-full py-2.5 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded-full font-medium\"\n            >\n              {cancelBtn}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n} "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 517, "column": 0}, "map": {"version":3,"sources":["file:///Users/michael/projects/ttys/src/app/detail/%5Bid%5D/components/VideoDetailContainer.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState } from 'react';\nimport Image from 'next/image';\nimport Link from 'next/link';\nimport { useRouter } from 'next/navigation';\nimport { IoMdArrowBack } from 'react-icons/io';\nimport { MdPlayCircleFilled } from 'react-icons/md';\nimport VideoPlayer from './VideoPlayer';\nimport RecommendVideos from './RecommendVideos';\nimport { THEME_COLOR } from '@/appConfig';\nimport DownloadAppModal from '@/app/components/common/DownloadAppModal';\n\ninterface VideoDetail {\n  id: string;\n  title: string;\n  cover: string;\n  description?: string;\n  score?: number;\n  year?: string;\n  category?: string;\n  region?: string;\n  director?: string;\n  actor?: string;\n  videoUrl: string;\n}\n\ninterface VideoDetailContainerProps {\n  videoDetail: VideoDetail | null;\n  recommendVideos: any[];\n  error: string | null;\n  translations: {\n    backToHome: string;\n    videoDetail: string;\n    play: string;\n    director: string;\n    actor: string;\n    category: string;\n    region: string;\n    year: string;\n    score: string;\n    noData: string;\n    loadingText: string;\n    errorLoadingVideo: string;\n    recommendations: string;\n    general_watch_now: string;\n    general_hold: string;\n    download_app_title: string;\n    download_app_desc: string;\n    download_app_btn: string;\n    download_app_cancel: string;\n    download_app_short_title: string;\n    download_app_short_desc: string;\n    download_app_detail_title: string;\n    download_app_detail_desc: string;\n    \n  };\n}\n\nexport default function VideoDetailContainer({\n  videoDetail,\n  recommendVideos,\n  error,\n  translations\n}: VideoDetailContainerProps) {\n  const router = useRouter();\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [showDownloadModal, setShowDownloadModal] = useState(false);\n  \n  // 处理返回事件\n  const handleGoBack = () => {\n    router.back();\n  };\n  \n  // 处理播放事件\n  const handlePlay = () => {\n    // 显示下载APP弹框，而不是直接播放视频\n    setShowDownloadModal(true);\n  };\n  \n  // 处理播放结束或关闭\n  const handleClosePlayer = () => {\n    setIsPlaying(false);\n  };\n\n  // 关闭下载APP弹框\n  const handleCloseDownloadModal = () => {\n    setShowDownloadModal(false);\n  };\n  \n  // 如果有错误，显示错误信息\n  if (error) {\n    return (\n      <div className=\"flex flex-col items-center justify-center min-h-[50vh] px-4\">\n        <p className=\"text-red-500 mb-4\">{translations.errorLoadingVideo}: {error}</p>\n        <Link href=\"/\" className={`text-[${THEME_COLOR}]`}>\n          {translations.backToHome}\n        </Link>\n      </div>\n    );\n  }\n  \n  // 如果数据为空，显示加载中\n  if (!videoDetail) {\n    return (\n      <div className=\"flex items-center justify-center min-h-[50vh]\">\n        <p>{translations.loadingText}...</p>\n      </div>\n    );\n  }\n  \n  // 是否有播放源\n  const hasVideoUrl = !!videoDetail.videoUrl;\n  \n  return (\n    <div className=\"video-detail-container pb-16\">\n      \n      {/* 替换VideoPlayer为海报图片和播放按钮 */}\n      <div className=\"flex justify-center my-4 w-full\">\n        <div className=\"relative w-5/6 max-w-[200px] min-w-[120px] aspect-[3/4] bg-gray-200 rounded-lg shadow-md overflow-hidden\">\n          {/* {isPlaying ? (\n            <VideoPlayer \n              source={videoDetail.videoUrl} \n              title={videoDetail.title}\n              onClose={handleClosePlayer}\n            />\n          ) : ( */}\n            <div className=\"w-full h-full relative\">\n              {videoDetail.cover && (\n                <Image \n                  src={videoDetail.cover} \n                  alt={videoDetail.title} \n                  fill \n                  className=\"object-cover\"\n                  sizes=\"(max-width: 768px) 33vw, 200px\"\n                  priority\n                />\n              )}\n              \n              {/* 播放按钮 */}\n              {hasVideoUrl && (\n                <button \n                  onClick={handlePlay}\n                  className=\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-10\"\n                  aria-label={translations.play}\n                >\n                  <MdPlayCircleFilled className=\"text-white text-5xl shadow-lg opacity-90 hover:opacity-100 hover:scale-110 transition-all\" />\n                </button>\n              )}\n            </div>\n          {/* )} */}\n        </div>\n      </div>\n      \n      {/* 视频信息 */}\n      <div className=\"video-info p-4\">\n        <h2 className=\"text-xl font-bold mb-2\">{videoDetail.title}</h2>\n        \n        {/* 视频评分和年份 */}\n        <div className=\"flex items-center gap-2 mb-3 text-xs text-gray-600 dark:text-gray-400\">\n          {videoDetail.score && (\n            <span className=\"bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-100 px-2 py-0.5 rounded\">\n              {videoDetail.score} ⭐\n            </span>\n          )}\n          {videoDetail.year && <span>{videoDetail.year}</span>}\n          {videoDetail.category && <span>· {translations.category}</span>}\n          {videoDetail.region && <span>· {translations.region}</span>}\n        </div>\n        \n        {/* 导演和演员 */}\n        {videoDetail.director && (\n          <div className=\"mb-2 text-sm\">\n            <span className=\"font-medium\">{translations.director}: </span>\n            <span className=\"text-gray-700 dark:text-gray-300\">{videoDetail.director}</span>\n          </div>\n        )}\n        \n        {videoDetail.actor && (\n          <div className=\"mb-3 text-sm\">\n            <span className=\"font-medium\">{translations.actor}: </span>\n            <span className=\"text-gray-700 dark:text-gray-300\">{videoDetail.actor}</span>\n          </div>\n        )}\n        \n        {/* 视频简介 */}\n        {videoDetail.description && (\n          <div className=\"mt-4 mb-6\">\n            <p className=\"text-sm text-gray-700 dark:text-gray-300 leading-relaxed\">\n              {videoDetail.description}\n            </p>\n          </div>\n        )}\n        \n        {/* 底部播放按钮 (当有播放源但没有显示播放器时) */}\n        {hasVideoUrl && (\n          <button \n            onClick={handlePlay}\n            className=\"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg flex items-center justify-center gap-2 mb-6\"\n          >\n            <MdPlayCircleFilled className=\"text-xl\" />\n            <span>{translations.play}</span>\n          </button>\n        )}\n      </div>\n      \n      {/* 猜你喜欢 */}\n      <div className=\"recommend-videos px-4 mb-4\">\n        <h3 className=\"text-lg font-medium mb-3\">{translations.recommendations}</h3>\n        <RecommendVideos videos={recommendVideos} translations={translations} />\n      </div>\n\n      {/* 下载APP弹框 */}\n      <DownloadAppModal \n        isOpen={showDownloadModal}\n        onClose={handleCloseDownloadModal}\n        translations={translations}\n        videoTitle={videoDetail.title}\n        modalType=\"detail\"\n      />\n    </div>\n  );\n} "],"names":[],"mappings":"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","debugId":null}}]
}